# ================================================================
# TMUX CONFIGURATION - MODERN AESTHETIC DESIGN
# ================================================================

# ----------------------------------------------------------------
# TERMINAL & COLOR SETTINGS
# ----------------------------------------------------------------
# Better terminal support with true color
set-option -g default-terminal "xterm-kitty"
set-option -ga terminal-overrides ",*256col*:Tc"
set-option -g focus-events on

# Enable system clipboard integration
set-option -g set-clipboard on
set-option -ga terminal-overrides ",xterm*:Tc"
set-option -g allow-passthrough on

# Copy bindings using xclip
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -in"
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -in"
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -in"

# Remove delay when switching between Vim modes
set -sg escape-time 0

# ----------------------------------------------------------------
# GENERAL SETTINGS
# ----------------------------------------------------------------
# Use vim keybindings
set-window-option -g mode-keys vi

# Enable mouse support
set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase scrollback buffer size
set -g history-limit 50000

# Increase tmux messages display duration
set -g display-time 4000

# Refresh status line every 5 seconds
set -g status-interval 5

# ----------------------------------------------------------------
# KEY BINDINGS
# ----------------------------------------------------------------
# Make new panes inherit pwd path
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Better pane navigation (vim-like)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes with arrow keys
bind -r Left resize-pane -L 5
bind -r Down resize-pane -D 5
bind -r Up resize-pane -U 5
bind -r Right resize-pane -R 5

# Quick reload of config file
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# ----------------------------------------------------------------
# VISUAL DESIGN - SKY BLUE THEME
# ----------------------------------------------------------------

# Sky blue theme colors - sourced from centralized theme
color_bg="default"             # Background (dark)
color_fg="terminal"            # Foreground (light)

# Base colors - grayscale for text
color_base03="black"           # Darkest - background
color_base02="colour234"       # Dark gray - background highlights
color_base01="colour240"       # Medium gray - comments
color_base00="colour244"       # Light gray - secondary text
color_base0="colour247"        # Lighter gray - body text
color_base1="colour250"        # Very light gray - emphasized
color_base2="colour254"        # Almost white
color_base3="white"            # White - brightest text

# Accent colors - Sky Blue spectrum
color_primary="colour75"       # Sky blue (#5fafff)
color_bright="colour39"        # Bright sky blue (#00afff)
color_light="colour117"        # Light sky blue (#87d7ff)
color_medium="colour111"       # Medium sky blue (#87afff)
color_cyan="colour81"          # Cyan blue (#5fd7ff)
color_accent="colour123"       # Pale sky blue (#87ffff)

# ----------------------------------------------------------------
# STATUS BAR DESIGN - MINIMALIST STYLE WITH BORDER
# ----------------------------------------------------------------
# Status bar general settings
set -g status-position bottom
set -g status-justify centre
set -g status-style "bg=$color_bg,fg=$color_fg"
set -g status-left-length 100
set -g status-right-length 100

# Left status: Host and session name (minimalist with bright prefix indicator)
set -g status-left "#{?client_prefix,#[bg=$color_bright]#[fg=$color_base03],#[bg=$color_primary]#[fg=$color_base03]}#[bold] #(ps -t #{pane_tty} -o command= 2>/dev/null | awk '/^ssh / {print \"⇄\", $2; found=1; exit} END {if (!found) print \"#h\"}') | #{session_name} #[bg=$color_bg,fg=$color_base1] #[fg=$color_base1] #[bg=$color_bg,fg=$color_base1]"

# Right status: Git branch, battery, time and date (minimalist)
set -g status-right "#[fg=$color_light]#(cd #{pane_current_path}; git rev-parse --abbrev-ref HEAD 2>/dev/null | sed 's/.*/ &/') #[fg=$color_base01]│#[fg=$color_base1] #(cat /sys/class/power_supply/BAT*/capacity 2>/dev/null | head -1 | sed 's/$/%/') #[fg=$color_base01]│#[fg=$color_base1] %H:%M #[fg=$color_base01]│#[fg=$color_base1] %d %b"

# Window status format (minimalist with bright active window)
setw -g window-status-current-format "#[bg=$color_primary]#[fg=$color_base03]#[bold] #I #W#{?window_zoomed_flag, Z,} #[default]"
setw -g window-status-format "#[fg=$color_base1] #I #W#{?window_zoomed_flag, Z,} #[default]"

# Window status separator
setw -g window-status-separator ""

# Activity and bell styling
setw -g window-status-activity-style "fg=$color_bright,bold"
setw -g window-status-bell-style "fg=$color_bright,bold"

# ----------------------------------------------------------------
# PANE BORDERS - MINIMALIST STYLE
# ----------------------------------------------------------------
# Pane border colors
set -g pane-border-style "fg=$color_base01"
set -g pane-active-border-style "fg=$color_primary,bold"

# No pane border status (border is part of status bar now)
set -g pane-border-status off

# ----------------------------------------------------------------
# MESSAGE STYLING
# ----------------------------------------------------------------
# Command line/message text
set -g message-style "bg=$color_primary,fg=$color_base03,bold"
set -g message-command-style "bg=$color_base02,fg=$color_base1"

# ----------------------------------------------------------------
# COPY MODE STYLING
# ----------------------------------------------------------------
# Copy mode colors (bright blue when in copy mode with prefix)
setw -g mode-style "bg=$color_bright,fg=$color_base03,bold"

# ----------------------------------------------------------------
# CLOCK STYLING
# ----------------------------------------------------------------
# Clock mode colors
setw -g clock-mode-colour "$color_primary"
setw -g clock-mode-style 12

# ----------------------------------------------------------------
# PLUGIN CONFIGURATION (Commented out but ready to use)
# ----------------------------------------------------------------
# List of plugins
# set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'tmux-plugins/tmux-yank'
# set -g @plugin 'tmux-plugins/tmux-resurrect'

# Initialize TMUX plugin manager (keep this line at the very bottom)
# run '~/.tmux/plugins/tpm/tpm'
